# Bank Application

A Java-based HTTP server implementing banking operations with multithreading capabilities.

## Project Structure

- `src/` - Main source code
- `scripts/` - Utility scripts for running and testing
- `stress-test/` - Stress testing suite
- `target/` - Compiled output (generated by Maven)
- `logs/` - Application log files

## Getting Started

### Prerequisites

- Java JDK 21
- Apache Maven

### Building the Project

```bash
mvn clean compile
```

### Running the Server

```bash
./scripts/run-server.sh
```

The server will start on port 8080 by default (http://localhost:8080).

### Running the Client

```bash
./scripts/run-client.sh
```

### Running Tests

```bash
# Run unit tests
mvn test

# Run integration tests with scripts
./scripts/api_test.sh
./scripts/comprehensive_test.sh
```

### Running Stress Tests

```bash
cd stress-test
./run-stress-test.sh
```

More details in [stress-test/README.md](stress-test/README.md)

## Scripts

All utility scripts are organized in the `scripts/` directory:

- Server and client execution scripts
- Various test scripts for different functionalities

See [scripts/README.md](scripts/README.md) for detailed information about each script.

## Configuration

The server configuration is in `src/main/resources/http.json`:
- Port: 8080 (default)
- Web root: /tmp (default)
- Storage: in-memory (default)

## Logging

The application uses SLF4J with Logback for logging. Logs are written to the `logs/` directory:
- `application.log` - General application logs
- `error.log` - Error-specific logs

The logging configuration has been verified and is working correctly. See [logs/README.md](logs/README.md) for detailed logging configuration.

## API Endpoints

- `POST /users` - Create a new user
- `POST /login` - User login
- `GET /accounts?userId={id}` - Get user accounts
- `GET /accounts-all` - Get all accounts (across all users)
- `POST /accounts` - Create a new account
- `POST /accounts/{id}/deposit` - Deposit funds
- `POST /accounts/{id}/withdraw` - Withdraw funds
- `POST /accounts/{id}/transfer` - Transfer funds
- `GET /admin/users` - Get all users (admin only)

## Multithreading Implementation

- Thread Pool Executors for concurrent request handling
- Atomic operations for account balance updates
- Lock-free algorithms using compare-and-swap (CAS) operations
- Concurrent-safe deposit/withdrawal operations